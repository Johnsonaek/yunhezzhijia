(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-my-yh-store-setting-setting"],{"3a33":function(t,e,n){"use strict";var a,i=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-uni-view",{class:{hide:t.hide}},[n("v-uni-view",{staticClass:"qui-grids gutter10",class:"column"+t.column},[n("v-uni-view",{staticClass:"hem"},[t._l(t.imgs,(function(e,a){return n("v-uni-view",{key:a,staticClass:"qui-grid",attrs:{"data-url":t.imgs[a]},on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.ViewImage.apply(void 0,arguments)}}},[n("v-uni-view",{staticClass:"img1x1 relative"},[n("v-uni-image",{staticClass:"abs abslt",staticStyle:{height:"100%",width:"100%"},attrs:{src:t.imgs[a],mode:"aspectFill"}}),t.progress<100?n("v-uni-view",{staticClass:"abs flex aj-center text-white",staticStyle:{left:"0",right:"0",bottom:"0",top:"0","background-color":"rgba(0,0,0,0.6)"}},[t._v(t._s(t.progress)+"%")]):t._e(),n("v-uni-view",{staticClass:"abs absrt wh40 bg-red flex a-center j-center",attrs:{"data-index":a},on:{click:function(e){e.stopPropagation(),arguments[0]=e=t.$handleEvent(e),t.DelImg.apply(void 0,arguments)}}},[n("v-uni-text",{staticClass:"cuIcon-close fs30"})],1)],1)],1)})),t.imgs.length<t.count?n("v-uni-view",{staticClass:"qui-grid",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.ChooseImage.apply(void 0,arguments)}}},[n("v-uni-view",{staticClass:"img1x1 relative"},[n("v-uni-text",{staticClass:"cuIcon-cameraadd abs abscc fs50"})],1)],1):t._e()],2)],1)],1)},s=[];n.d(e,"b",(function(){return i})),n.d(e,"c",(function(){return s})),n.d(e,"a",(function(){return a}))},"3b8a":function(t,e,n){"use strict";n.r(e);var a=n("72b8"),i=n.n(a);for(var s in a)"default"!==s&&function(t){n.d(e,t,(function(){return a[t]}))}(s);e["default"]=i.a},"4c35":function(t,e,n){"use strict";n.r(e);var a=n("7c0e"),i=n.n(a);for(var s in a)"default"!==s&&function(t){n.d(e,t,(function(){return a[t]}))}(s);e["default"]=i.a},5017:function(t,e,n){"use strict";n.r(e);var a=n("3a33"),i=n("4c35");for(var s in i)"default"!==s&&function(t){n.d(e,t,(function(){return i[t]}))}(s);n("dd76");var r,c=n("f0c5"),u=Object(c["a"])(i["default"],a["b"],a["c"],!1,null,"c8c88510",null,!1,a["a"],r);e["default"]=u.exports},"72b8":function(t,e,n){"use strict";var a=n("ee27");Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0,n("96cf");var i=a(n("c964")),s=a(n("5017")),r={components:{ImagePicker:s.default},data:function(){return{avatar:"/static/images/default-tx.png",form:{path:"",name:"",announcement:""}}},onLoad:function(){this.getxdInfo()},methods:{submit:function(){this.infoUpdata()},getxdInfo:function(){var t=this;this.post("/wap/OwnSmallShop/shopInfo").then((function(e){t.form.path=e.data.shop.path,t.form.name=e.data.shop.name,t.form.announcement=e.data.shop.announcement}))},openChoose:function(){this.$refs.imgPicker.ChooseImage()},upSuccess:function(t){this.form.image=t.file,this.updataAvatar(t.file),this.avatar=t.file},updataAvatar:function(t){var e=this;return(0,i.default)(regeneratorRuntime.mark((function n(){var a;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return n.next=2,e.post("/wap/OwnSmallShop/photoUpdate",{path:t});case 2:a=n.sent,e.apiSuccess(a,"头像已更新",(function(){e.getxdInfo()}));case 4:case"end":return n.stop()}}),n)})))()},updata:function(){var t=this;return(0,i.default)(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,t.post("/wap/Line/Update",t.form);case 2:e.sent;case 3:case"end":return e.stop()}}),e)})))()},infoUpdata:function(){var t=this;return(0,i.default)(regeneratorRuntime.mark((function e(){var n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,t.post("/wap/OwnSmallShop/infoUpdate",t.form);case 2:n=e.sent,t.success(n,"更新成功",(function(){t.getxdInfo()}));case 4:case"end":return e.stop()}}),e)})))()}}};e.default=r},"7c0e":function(t,e,n){"use strict";var a=n("ee27");n("99af"),n("a434"),n("a9e3"),Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var i=a(n("fe83")),s={name:"ImagePicker",props:{index:{type:[String,Number],default:0},hide:{type:Boolean,default:!1},count:{type:[String,Number],default:4},column:{type:[String,Number],default:4}},data:function(){return{progress:0,imgs:[],file:""}},methods:{ChooseImage:function(){var t=this,e=uni.getStorageSync("token"),n="";n=i.default.http+i.default.hostName,uni.chooseImage({count:this.count,sizeType:["original","compressed"],sourceType:["album"],success:function(a){0!=t.imgs.length?t.imgs=t.imgs.concat(a.tempFilePaths):t.imgs=a.tempFilePaths;var s=uni.uploadFile({url:n+i.default.uploadApiUrl,filePath:t.imgs[t.imgs.length-1],name:"file","content-type":"multipart/form-data",header:{token:e},success:function(e){var n=JSON.parse(e.data);t.success(n.data.imgUrl)},fail:function(e){t.imgs=[],uni.showToast({icon:"none",title:"图片上传失败！"}),t.progress=0}});s.onProgressUpdate((function(e){t.progress=e.progress,t.$emit("onProgress",e.progress)}))}})},ViewImage:function(t){uni.previewImage({urls:this.imgs,current:t.currentTarget.dataset.url})},DelImg:function(t){this.imgs.splice(t.currentTarget.dataset.index,1)},success:function(t){this.$emit("success",{file:t,index:this.index})}}};e.default=s},"82d1":function(t,e,n){var a=n("24fb");e=a(!1),e.push([t.i,".hide[data-v-c8c88510]{opacity:0;width:0;height:0;overflow:hidden}",""]),t.exports=e},a429:function(t,e,n){var a=n("82d1");"string"===typeof a&&(a=[[t.i,a,""]]),a.locals&&(t.exports=a.locals);var i=n("4f06").default;i("52250ce6",a,!0,{sourceMap:!1,shadowMode:!1})},a42a:function(t,e,n){"use strict";var a,i=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-uni-view",[n("page",{attrs:{title:"小店设置",bgClass:"bg-white"}},[n("v-uni-view",{staticClass:"qui-cells"},[n("v-uni-view",{staticClass:"qui-cell"},[n("v-uni-view",{staticClass:"cell-bd"},[t._v("小店头像")]),n("v-uni-view",{staticClass:"mr20",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.openChoose.apply(void 0,arguments)}}},[n("v-uni-image",{staticClass:"radius50 wh70",attrs:{src:t.form.path?t.form.path:t.avatar,mode:""}})],1),n("v-uni-view",{staticClass:"arrow-r"})],1),n("v-uni-view",{staticClass:"qui-cell"},[n("v-uni-view",{staticClass:"cell-bd"},[t._v("店铺名称")]),n("v-uni-view",{staticClass:"mr20"},[n("v-uni-input",{staticClass:"tr",attrs:{type:"text",value:"",placeholder:"店铺名称"},model:{value:t.form.name,callback:function(e){t.$set(t.form,"name",e)},expression:"form.name"}})],1),n("v-uni-view",{staticClass:"arrow-r"})],1),n("v-uni-view",{staticClass:"qui-cell"},[n("v-uni-view",{staticClass:"cell-bd"},[n("v-uni-view",{staticClass:"mb30"},[t._v("小店公告")]),n("v-uni-view",{staticClass:"border radius16 plr30 ptb30",staticStyle:{border:"1px solid #eee"}},[n("v-uni-textarea",{staticStyle:{height:"200rpx","font-size":"28rpx"},attrs:{value:"",placeholder:"请输入店铺公告描述（最多100字）"},model:{value:t.form.announcement,callback:function(e){t.$set(t.form,"announcement",e)},expression:"form.announcement"}})],1)],1)],1)],1),n("v-uni-view",{staticClass:"h100"}),n("v-uni-view",{staticClass:"plr50 ptb30"},[n("v-uni-view",{staticClass:"qui-btn round",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.submit.apply(void 0,arguments)}}},[t._v("保存")])],1)],1),n("image-picker",{ref:"imgPicker",attrs:{hide:!0,count:1},on:{success:function(e){arguments[0]=e=t.$handleEvent(e),t.upSuccess.apply(void 0,arguments)}}})],1)},s=[];n.d(e,"b",(function(){return i})),n.d(e,"c",(function(){return s})),n.d(e,"a",(function(){return a}))},c786:function(t,e,n){"use strict";n.r(e);var a=n("a42a"),i=n("3b8a");for(var s in i)"default"!==s&&function(t){n.d(e,t,(function(){return i[t]}))}(s);var r,c=n("f0c5"),u=Object(c["a"])(i["default"],a["b"],a["c"],!1,null,"7573fd83",null,!1,a["a"],r);e["default"]=u.exports},dd76:function(t,e,n){"use strict";var a=n("a429"),i=n.n(a);i.a}}]);