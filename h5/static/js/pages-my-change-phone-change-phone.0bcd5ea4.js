(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-my-change-phone-change-phone"],{"20f5":function(e,t,n){var i=n("4818");"string"===typeof i&&(i=[[e.i,i,""]]),i.locals&&(e.exports=i.locals);var s=n("4f06").default;s("bf39ad5e",i,!0,{sourceMap:!1,shadowMode:!1})},"28db":function(e,t,n){"use strict";var i=n("ee27");n("a9e3"),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,n("96cf");var s=i(n("c964")),a=i(n("fe83")),r={name:"sendCode",data:function(){return{timer:null,send:!0,time:null}},props:{type:{type:String,default:"1"},url:{type:String,default:a.default.sendCodeApiUrl},tel:{type:String,default:""},second:{type:Number,default:60}},created:function(){this.time=this.second},methods:{sendCode:function(){var e=this;return(0,s.default)(regeneratorRuntime.mark((function t(){var n,i;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(e.$validate.isPhone(e.tel)){t.next=3;break}return uni.showToast({icon:"none",title:"请输入正确的手机号"}),t.abrupt("return",!1);case 3:return n=e,t.next=6,e.post(e.url,{mobile:e.tel});case 6:i=t.sent,0==i.code&&(n.send=!1,n.timer=setInterval((function(){n.time--,n.time<=0&&(n.send=!0,n.time=this.second,clearInterval(n.timer))}),1e3));case 8:case"end":return t.stop()}}),t)})))()}}};t.default=r},"2e16":function(e,t,n){"use strict";var i,s=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-uni-view",[n("page",{attrs:{title:e.title,bgClass:"bg-white",headbor:!1}},[1==e.step?n("v-uni-view",{staticClass:"tc ptb30 plr30"},[n("v-uni-view",{staticClass:"fs28 text-gray"},[e._v("为了您的账户安全，将对原有手机号码验证")]),n("v-uni-view",{staticClass:"fs32 text-default mt40"},[n("v-uni-text",[e._v("已绑定：")]),n("v-uni-text",{staticClass:"fw600"},[e._v(e._s(e.userInfo.mobile))])],1),n("v-uni-view",{staticClass:"flex mt30 number-box  tc aj-center mlr30 mb20"},[n("v-uni-input",{staticClass:"smscode-input",attrs:{type:"number",maxlength:"4",value:""},on:{input:function(t){arguments[0]=t=e.$handleEvent(t),e.codeInput.apply(void 0,arguments)}},model:{value:e.smscode,callback:function(t){e.smscode=t},expression:"smscode"}}),e._l(e.len,(function(t,i){return n("v-uni-view",{key:i,staticClass:"flex-item h100 flex aj-center",class:e.smscode.length>i?"dot":""},[n("v-uni-text",{staticClass:"fs40 num"},[e._v(e._s(e.smscode[i]))])],1)}))],2),n("v-uni-view",{staticClass:"mt30"},[n("send-code",{attrs:{tel:e.userInfo.mobile}})],1),n("v-uni-view",{staticClass:"plr50 ptb50 mt50"},[n("v-uni-view",{staticClass:"qui-btn",class:e.btnDisabled?"disabled":"",on:{click:function(t){arguments[0]=t=e.$handleEvent(t),e.nextStep.apply(void 0,arguments)}}},[e._v("下一步")])],1)],1):e._e(),2==e.step?n("v-uni-view",{staticClass:"step2"},[n("v-uni-view",{staticClass:"qui-cells"},[n("v-uni-view",{staticClass:"qui-cell"},[n("v-uni-view",{staticClass:"cell-bd"},[n("v-uni-input",{attrs:{type:"number",maxlength:"11",value:"",placeholder:"请输入新手机号码"},model:{value:e.form.mobile,callback:function(t){e.$set(e.form,"mobile",t)},expression:"form.mobile"}})],1)],1),n("v-uni-view",{staticClass:"qui-cell"},[n("v-uni-view",{staticClass:"cell-bd"},[n("v-uni-input",{attrs:{type:"number",maxlength:"6",value:"",placeholder:"请输入验证码"},on:{input:function(t){arguments[0]=t=e.$handleEvent(t),e.inputHandle.apply(void 0,arguments)}},model:{value:e.form.smscode,callback:function(t){e.$set(e.form,"smscode",t)},expression:"form.smscode"}})],1),n("v-uni-view",{staticClass:"qui-btn w160 bg-gray inline small"},[n("send-code",{attrs:{tel:e.userInfo.mobile}})],1)],1),n("v-uni-view",{staticClass:"plr50 ptb50 mt50"},[n("v-uni-view",{staticClass:"qui-btn",class:e.btnDisabled?"disabled":"",on:{click:function(t){arguments[0]=t=e.$handleEvent(t),e.submit.apply(void 0,arguments)}}},[e._v("确认修改")])],1)],1)],1):e._e()],1)],1)},a=[];n.d(t,"b",(function(){return s})),n.d(t,"c",(function(){return a})),n.d(t,"a",(function(){return i}))},"43aa":function(e,t,n){"use strict";n.r(t);var i=n("2e16"),s=n("ecf2");for(var a in s)"default"!==a&&function(e){n.d(t,e,(function(){return s[e]}))}(a);n("6946");var r,u=n("f0c5"),o=Object(u["a"])(s["default"],i["b"],i["c"],!1,null,"0e423d00",null,!1,i["a"],r);t["default"]=o.exports},"441e":function(e,t,n){"use strict";var i=n("ee27");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,n("96cf");var s=i(n("c964")),a=i(n("f3f3")),r=i(n("e8aa")),u=n("2f62"),o={components:{sendCode:r.default},data:function(){return{len:["","","",""],btnDisabled:!0,title:"身份验证",step:1,smscode:"",form:{mobile:"",smscode:""}}},computed:(0,a.default)({},(0,u.mapState)({userInfo:function(e){return e.user.userInfo}})),methods:(0,a.default)({},(0,u.mapActions)(["updateUserInfo"]),{submit:function(){this.bindPhone()},nextStep:function(){this.btnDisabled=!0,this.verifyMobile()},codeInput:function(e){this.smscode=e.detail.value,4==this.smscode.length&&(this.btnDisabled=!1)},inputHandle:function(e){4==e.detail.value.length&&(this.btnDisabled=!1)},verifyMobile:function(){var e=this;return(0,s.default)(regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.post("/wap/Cis/verifyMobile",{smscode:e.smscode});case 2:n=t.sent,200==n.code&&(e.step=2);case 4:case"end":return t.stop()}}),t)})))()},bindPhone:function(){var e=this;return(0,s.default)(regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.post("/wap/Cis/bindMobile",e.form);case 2:n=t.sent,e.success(n,"",(function(){e.updateUserInfo(),setTimeout((function(){uni.navigateBack()}),500)}));case 4:case"end":return t.stop()}}),t)})))()}})};t.default=o},4818:function(e,t,n){var i=n("24fb");t=i(!1),t.push([e.i,'@charset "UTF-8";\r\n/**\r\n * 这里是uni-app内置的常用样式变量\r\n *\r\n * uni-app 官方扩展插件及插件市场（https://ext.dcloud.net.cn）上很多三方插件均使用了这些样式变量\r\n * 如果你是插件开发者，建议你使用scss预处理，并在插件代码中直接使用这些变量（无需 import 这个文件），方便用户通过搭积木的方式开发整体风格一致的App\r\n *\r\n */\r\n/**\r\n * 如果你是App开发者（插件使用者），你可以通过修改这些变量来定制自己的插件主题，实现自定义主题功能\r\n *\r\n * 如果你的项目同样使用了scss预处理，你也可以直接在你的 scss 代码中使用如下变量，同时无需 import 这个文件\r\n */\r\n/* uni.scss */\r\n/* 颜色变量 */\r\n/* 行为相关颜色 */\r\n/* 文字颜色 */\r\n/* 背景颜色 */\r\n/* 边框颜色 */\r\n/* 尺寸变量 */\r\n/* 文字尺寸 */\r\n/* 图片尺寸 */\r\n/* Border Radius */\r\n/* 水平间距 */\r\n/* 垂直间距 */\r\n/* 透明度 */\r\n/* 文章场景相关 */.number-box[data-v-0e423d00]{position:relative}.number-box .smscode-input[data-v-0e423d00]{position:absolute;width:100%;height:100%;z-index:9;text-indent:-1000px}.number-box .flex-item[data-v-0e423d00]{position:relative}.number-box .flex-item[data-v-0e423d00]::after{content:"";position:absolute;bottom:%?10?%;left:0;right:0;margin:0 auto;width:%?106?%;height:%?4?%;background-color:#aaa}.number-box .dot[data-v-0e423d00]:after{background-color:#000}.number-box .dot[data-v-0e423d00]:before{display:none;content:"";position:absolute;bottom:%?40?%;left:0;right:0;margin:0 auto;width:%?20?%;height:%?20?%;border-radius:50%;background-color:#000}',""]),e.exports=t},6946:function(e,t,n){"use strict";var i=n("20f5"),s=n.n(i);s.a},"9bd3":function(e,t,n){"use strict";n.r(t);var i=n("28db"),s=n.n(i);for(var a in i)"default"!==a&&function(e){n.d(t,e,(function(){return i[e]}))}(a);t["default"]=s.a},a4dc:function(e,t,n){"use strict";var i,s=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-uni-view",{on:{click:function(t){arguments[0]=t=e.$handleEvent(t),e.sendCode.apply(void 0,arguments)}}},[e.send?n("v-uni-view",[e._v("获取验证码")]):n("v-uni-view",[e._v(e._s(e.time)+"s")])],1)},a=[];n.d(t,"b",(function(){return s})),n.d(t,"c",(function(){return a})),n.d(t,"a",(function(){return i}))},e8aa:function(e,t,n){"use strict";n.r(t);var i=n("a4dc"),s=n("9bd3");for(var a in s)"default"!==a&&function(e){n.d(t,e,(function(){return s[e]}))}(a);var r,u=n("f0c5"),o=Object(u["a"])(s["default"],i["b"],i["c"],!1,null,null,null,!1,i["a"],r);t["default"]=o.exports},ecf2:function(e,t,n){"use strict";n.r(t);var i=n("441e"),s=n.n(i);for(var a in i)"default"!==a&&function(e){n.d(t,e,(function(){return i[e]}))}(a);t["default"]=s.a}}]);